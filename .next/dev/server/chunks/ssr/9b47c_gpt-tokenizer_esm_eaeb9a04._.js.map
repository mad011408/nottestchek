{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/constants.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/constants.ts"],"sourcesContent":["export const ALL_SPECIAL_TOKENS = 'all'\nexport const DEFAULT_MERGE_CACHE_SIZE = 100_000\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,kBAAkB,GAAG,KAAK,CAAA;AAChC,MAAM,wBAAwB,GAAG,OAAO,CAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/utfUtil.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/utfUtil.ts"],"sourcesContent":["/* eslint-disable no-bitwise */\n/* eslint-disable no-magic-numbers */\n\nexport const isAscii = (codePoint: number) => codePoint <= 0x7f\n\nconst HIGH_SURROGATE_START = 55_296\nconst HIGH_SURROGATE_END = 56_319\n\nexport function endsWithIncompleteUtfPairSurrogate(string: string): boolean {\n  if (string.length === 0) return false\n  // Check if the last character is a high surrogate\n  // eslint-disable-next-line unicorn/prefer-code-point\n  const lastCharCode = string.charCodeAt(string.length - 1)\n  return (\n    lastCharCode >= HIGH_SURROGATE_START && lastCharCode <= HIGH_SURROGATE_END\n  )\n}\n\nfunction isValidUTF8(bytes: Uint8Array): boolean {\n  let i = 0\n  while (i < bytes.length) {\n    const byte1 = bytes[i]!\n\n    let numBytes = 0\n    let codePoint = 0\n\n    // Determine the number of bytes in the current UTF-8 character\n    if (byte1 <= 0x7f) {\n      // 1-byte character (ASCII)\n      numBytes = 1\n      codePoint = byte1\n    } else if ((byte1 & 0xe0) === 0xc0) {\n      // 2-byte character\n      numBytes = 2\n      codePoint = byte1 & 0x1f\n      if (byte1 <= 0xc1) return false // Overlong encoding not allowed\n    } else if ((byte1 & 0xf0) === 0xe0) {\n      // 3-byte character\n      numBytes = 3\n      codePoint = byte1 & 0x0f\n    } else if ((byte1 & 0xf8) === 0xf0) {\n      // 4-byte character\n      numBytes = 4\n      codePoint = byte1 & 0x07\n      if (byte1 > 0xf4) return false // Code points above U+10FFFF not allowed\n    } else {\n      // Invalid first byte of UTF-8 character\n      return false\n    }\n\n    // Ensure there are enough continuation bytes\n    if (i + numBytes > bytes.length) return false\n\n    // Process the continuation bytes\n    for (let j = 1; j < numBytes; j++) {\n      const byte = bytes[i + j]\n      if (byte === undefined || (byte & 0xc0) !== 0x80) return false // Continuation bytes must start with '10'\n      codePoint = (codePoint << 6) | (byte & 0x3f)\n    }\n\n    // Check for overlong encodings\n    if (numBytes === 2 && codePoint < 0x80) return false // Overlong 2-byte sequence\n    if (numBytes === 3 && codePoint < 2_048) return false // Overlong 3-byte sequence\n    if (numBytes === 4 && codePoint < 65_536) return false // Overlong 4-byte sequence\n\n    // Check for surrogate halves (U+D800 to U+DFFF)\n    if (codePoint >= 55_296 && codePoint <= 57_343) return false\n\n    // Check for code points above U+10FFFF\n    if (codePoint > 1_114_111) return false\n\n    // Move to the next character\n    i += numBytes\n  }\n  return true\n}\n\nconst textDecoder = new TextDecoder('utf8', { fatal: false })\n\nexport function tryConvertToString(arr: Uint8Array): string | undefined {\n  if (!isValidUTF8(arr)) {\n    return undefined\n  }\n  return textDecoder.decode(arr)\n}\n\n// Helper function to compare two Uint8Arrays lexicographically\nexport function compareUint8Arrays(a: Uint8Array, b: Uint8Array): number {\n  const len = Math.min(a.length, b.length)\n  for (let i = 0; i < len; i++) {\n    if (a[i] !== b[i]) {\n      return a[i]! - b[i]!\n    }\n  }\n  return a.length - b.length\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/util.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/util.ts"],"sourcesContent":["export function getMaxValueFromMap(map: Map<unknown, number>): number {\n  let max = 0\n  map.forEach((val) => {\n    max = Math.max(max, val)\n  })\n  return max\n}\n\nexport function escapeRegExp(string: string) {\n  return string.replace(/[$()*+.?[\\\\\\]^{|}]/g, '\\\\$&') // $& means the whole matched string\n}\n\nexport function getSpecialTokenRegex(tokens: Set<string>): RegExp {\n  const escapedTokens = [...tokens].map(escapeRegExp)\n  const inner = escapedTokens.join('|')\n  return new RegExp(`(${inner})`)\n}\n"],"names":[],"mappings":";;;;;;;;AAAM,SAAU,kBAAkB,CAAC,GAAyB;IAC1D,IAAI,GAAG,GAAG,CAAC,CAAA;IACX,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;QAClB,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;IAC1B,CAAC,CAAC,CAAA;IACF,OAAO,GAAG,CAAA;AACZ,CAAC;AAEK,SAAU,YAAY,CAAC,MAAc;IACzC,OAAO,MAAM,CAAC,OAAO,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAA,CAAC,oCAAoC;AAC3F,CAAC;AAEK,SAAU,oBAAoB,CAAC,MAAmB;IACtD,MAAM,aAAa,GAAG,CAAC;WAAG,MAAM;KAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;IACnD,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IACrC,OAAO,IAAI,MAAM,CAAC,CAAA,CAAA,EAAI,KAAK,CAAA,CAAA,CAAG,CAAC,CAAA;AACjC,CAAC"}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/BytePairEncodingCore.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/BytePairEncodingCore.ts"],"sourcesContent":["/* eslint-disable no-continue */\n\nimport { DEFAULT_MERGE_CACHE_SIZE } from './constants.js'\nimport { compareUint8Arrays, isAscii, tryConvertToString } from './utfUtil.js'\nimport { escapeRegExp } from './util.js'\n\nexport type RawBytePairRanks = readonly (string | readonly number[])[]\n\nexport interface BytePairEncodingConfig {\n  bytePairRankDecoder: RawBytePairRanks\n  specialTokensEncoder?: Map<string, number>\n  tokenSplitRegex: RegExp\n  /**\n   * LRU cache for merged tokens pairs.\n   * Increasing this value should make encoding similar strings faster,\n   * but will consume more memory.\n   * @default 100000\n   */\n  mergeCacheSize?: number\n}\n\nconst emptyBuffer = new Uint8Array(0)\n\nexport const decoder = new TextDecoder('utf8')\n\nexport class BytePairEncodingCore {\n  readonly mergeableBytePairRankCount: number\n  /**\n   * an array where the index is the BPE rank,\n   * and the value is the string or the array of bytes that it decodes to\n   * it may contain holes if token is unused\n   */\n  private bytePairRankDecoder: RawBytePairRanks\n  private bytePairNonUtfRankDecoder = new Map<number, Uint8Array>()\n  private bytePairNonUtfSortedEncoder: readonly [Uint8Array, number][]\n  /**\n   * a reverse map of the bytePairRankDecoder,\n   * where the key is the string and the value is the rank\n   * values that cannot be represented as a string are present in `bytePairNonUtfSortedEncoder`\n   */\n  private bytePairStringRankEncoder: Map<string, number>\n  private tokenSplitRegex: RegExp\n  private specialTokensEncoder: Map<string, number>\n  private specialTokensDecoder: Map<number, string>\n  private specialTokenPatternRegex: RegExp\n  private textEncoder = new TextEncoder()\n  private mergeCache?: Map<string, number[]>\n  private mergeCacheSize: number\n\n  constructor({\n    bytePairRankDecoder,\n    specialTokensEncoder,\n    tokenSplitRegex,\n    mergeCacheSize = DEFAULT_MERGE_CACHE_SIZE,\n  }: BytePairEncodingConfig) {\n    this.bytePairRankDecoder = bytePairRankDecoder\n    this.bytePairStringRankEncoder = new Map<string, number>()\n    this.mergeCacheSize = mergeCacheSize\n    if (mergeCacheSize > 0) {\n      this.mergeCache = new Map()\n    }\n\n    // size without array holes (which may be present in the encoder)\n    this.mergeableBytePairRankCount = Object.keys(bytePairRankDecoder).length\n    const binaryLookup: [Uint8Array, number][] = []\n    // forEach skips array holes:\n    bytePairRankDecoder.forEach((value, rank) => {\n      if (typeof value === 'string') {\n        this.bytePairStringRankEncoder.set(value, rank)\n        return\n      }\n      const byteArray = new Uint8Array(value)\n      binaryLookup.push([byteArray, rank])\n      this.bytePairNonUtfRankDecoder.set(rank, byteArray)\n    })\n    this.bytePairNonUtfSortedEncoder = binaryLookup.sort((a, b) =>\n      compareUint8Arrays(a[0], b[0]),\n    )\n    this.specialTokensEncoder =\n      specialTokensEncoder ?? new Map<string, number>()\n    this.specialTokensDecoder = specialTokensEncoder\n      ? new Map([...specialTokensEncoder].map(([key, value]) => [value, key]))\n      : new Map<number, string>()\n    this.tokenSplitRegex = tokenSplitRegex\n\n    const escapedSpecialTokens = [...this.specialTokensEncoder.keys()].map(\n      escapeRegExp,\n    )\n    const allSpecialTokensRegex = escapedSpecialTokens.join('|')\n    try {\n      this.specialTokenPatternRegex = new RegExp(allSpecialTokensRegex, 'y')\n    } catch {\n      throw new Error('Invalid regular expression pattern.')\n    }\n  }\n\n  setMergeCacheSize(newSize: number): void {\n    if (this.mergeCacheSize === 0 && newSize > 0) {\n      this.mergeCache = new Map()\n    }\n    this.mergeCacheSize = newSize\n    if (newSize === 0) {\n      this.mergeCache = undefined\n    }\n  }\n\n  clearMergeCache(): void {\n    this.mergeCache?.clear()\n  }\n\n  *encodeNativeGenerator(\n    text: string,\n    allowedSpecial?: Set<string>,\n  ): Generator<number[], number, undefined> {\n    let startIndex = 0\n    let lastTokenLength = 0\n\n    while (true) {\n      const nextSpecialMatch = this.findNextSpecialToken(\n        text,\n        allowedSpecial,\n        startIndex,\n      )\n      const nextSpecialStartIndex = nextSpecialMatch?.[0]\n\n      const endIndex = nextSpecialStartIndex ?? text.length\n\n      const textBeforeSpecial =\n        startIndex === 0 && endIndex === text.length\n          ? text\n          : text.slice(startIndex, endIndex)\n\n      for (const [match] of textBeforeSpecial.matchAll(this.tokenSplitRegex)) {\n        const token = this.getBpeRankFromString(match)\n        if (token !== undefined) {\n          lastTokenLength = 1\n          yield [token]\n\n          continue\n        }\n\n        const tokens = this.bytePairEncode(match)\n        lastTokenLength = tokens.length\n        yield tokens\n      }\n\n      if (nextSpecialStartIndex !== undefined) {\n        const specialToken = nextSpecialMatch![1]\n        const specialTokenValue = this.specialTokensEncoder.get(specialToken)\n        if (specialTokenValue === undefined) {\n          throw new Error(\n            `Special token \"${specialToken}\" is not in the special token encoder.`,\n          )\n        }\n        yield [specialTokenValue]\n        startIndex = nextSpecialStartIndex + specialToken.length\n        lastTokenLength = 1\n      } else {\n        break\n      }\n    }\n\n    return lastTokenLength\n  }\n\n  encodeNative(text: string, allowedSpecial?: Set<string>): number[] {\n    let startIndex = 0\n    const tokensArray: number[] = [] // Flat list to collect the tokens\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      const nextSpecialMatch = this.findNextSpecialToken(\n        text,\n        allowedSpecial,\n        startIndex,\n      )\n      const nextSpecialStartIndex = nextSpecialMatch?.[0]\n\n      const endIndex = nextSpecialStartIndex ?? text.length\n\n      const textBeforeSpecial =\n        startIndex === 0 && endIndex === text.length\n          ? text\n          : text.slice(startIndex, endIndex)\n\n      for (const [match] of textBeforeSpecial.matchAll(this.tokenSplitRegex)) {\n        const token = this.getBpeRankFromString(match)\n        if (token !== undefined) {\n          tokensArray.push(token)\n\n          continue\n        }\n\n        const tokens = this.bytePairEncode(match)\n        tokensArray.push(...tokens)\n      }\n\n      if (nextSpecialStartIndex !== undefined) {\n        const specialToken = nextSpecialMatch![1]\n        const specialTokenValue = this.specialTokensEncoder.get(specialToken)\n        if (specialTokenValue === undefined) {\n          throw new Error(\n            `Special token \"${specialToken}\" is not in the special token encoder.`,\n          )\n        }\n        tokensArray.push(specialTokenValue)\n        startIndex = nextSpecialStartIndex + specialToken.length\n      } else {\n        break\n      }\n    }\n\n    return tokensArray\n  }\n\n  countNative(text: string, allowedSpecial?: Set<string>): number {\n    let startIndex = 0\n    let tokensCount = 0\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      const nextSpecialMatch = this.findNextSpecialToken(\n        text,\n        allowedSpecial,\n        startIndex,\n      )\n      const nextSpecialStartIndex = nextSpecialMatch?.[0]\n\n      const endIndex = nextSpecialStartIndex ?? text.length\n\n      const textBeforeSpecial =\n        startIndex === 0 && endIndex === text.length\n          ? text\n          : text.slice(startIndex, endIndex)\n\n      for (const [match] of textBeforeSpecial.matchAll(this.tokenSplitRegex)) {\n        const token = this.getBpeRankFromString(match)\n        if (token !== undefined) {\n          tokensCount++\n\n          continue\n        }\n\n        const tokens = this.bytePairEncode(match)\n        tokensCount += tokens.length\n      }\n\n      if (nextSpecialStartIndex !== undefined) {\n        const specialToken = nextSpecialMatch![1]\n        const specialTokenValue = this.specialTokensEncoder.get(specialToken)\n        if (specialTokenValue === undefined) {\n          throw new Error(\n            `Special token \"${specialToken}\" is not in the special token encoder.`,\n          )\n        }\n        tokensCount++\n        startIndex = nextSpecialStartIndex + specialToken.length\n      } else {\n        break\n      }\n    }\n\n    return tokensCount\n  }\n\n  *decodeNativeGenerator(\n    tokens: Iterable<number>,\n  ): Generator<Uint8Array | string, void, void> {\n    for (const token of tokens) {\n      const tokenBytes = this.tryDecodeToken(token)\n      if (tokenBytes) {\n        yield tokenBytes\n      }\n    }\n  }\n\n  decodeNative(tokens: Iterable<number>): string {\n    let decoded = ''\n    let intBuffer = emptyBuffer\n\n    for (const token of tokens) {\n      const tokenBytes = this.tryDecodeToken(token)\n      if (tokenBytes === undefined) {\n        throw new Error(`Token ${token} is not in the byte pair encoder.`)\n      }\n      if (typeof tokenBytes === 'string') {\n        if (intBuffer !== emptyBuffer) {\n          decoded += decoder.decode(intBuffer, { stream: true })\n          intBuffer = emptyBuffer\n        }\n        decoded += tokenBytes\n      } else {\n        const newBuffer = new Uint8Array(intBuffer.length + tokenBytes.length)\n        newBuffer.set(intBuffer)\n        newBuffer.set(tokenBytes, intBuffer.length)\n        intBuffer = newBuffer\n      }\n    }\n\n    if (intBuffer !== emptyBuffer) {\n      decoded += decoder.decode(intBuffer, { stream: true })\n    }\n    return decoded\n  }\n\n  async *decodeNativeAsyncIterable(\n    tokens: AsyncIterable<number>,\n  ): AsyncGenerator<Uint8Array | string> {\n    for await (const token of tokens) {\n      const tokenBytesOrString = this.tryDecodeToken(token)\n      if (tokenBytesOrString) {\n        yield tokenBytesOrString\n      }\n    }\n  }\n\n  private getBpeRankFromString(key: string): number | undefined {\n    return this.bytePairStringRankEncoder.get(key)\n  }\n\n  private getBpeRankFromStringOrThrow(key: string): number {\n    const value = this.getBpeRankFromString(key)\n    if (value === undefined) {\n      throw new Error(\n        `The byte-pair encoding does not contain a value for: ${key}`,\n      )\n    }\n    return value\n  }\n\n  private getBpeRankFromBytes(key: Uint8Array): number | undefined {\n    const keyAsString = tryConvertToString(key)\n\n    if (keyAsString !== undefined) {\n      return this.getBpeRankFromString(keyAsString)\n    }\n\n    // Perform binary search on the binary keys\n    const index = this.binarySearch(key)\n    if (index !== -1) {\n      return this.bytePairNonUtfSortedEncoder[index]![1]\n    }\n\n    return undefined\n  }\n\n  private getBpeRankFromBytesOrThrow(key: Uint8Array): number {\n    const value = this.getBpeRankFromBytes(key)\n    if (value === undefined) {\n      throw new Error(\n        `The byte-pair encoding does not contain a value for: ${key.toString()}`,\n      )\n    }\n    return value\n  }\n\n  // Binary search on the binary keys\n  private binarySearch(key: Uint8Array): number {\n    let low = 0\n    let high = this.bytePairNonUtfSortedEncoder.length - 1\n\n    while (low <= high) {\n      // eslint-disable-next-line no-bitwise\n      const mid = (low + high) >>> 1\n      const midKey = this.bytePairNonUtfSortedEncoder[mid]![0]\n      let cmp = 0\n      const maxLength = Math.min(midKey.length, key.length)\n      for (let i = 0; i < maxLength; i++) {\n        cmp = midKey[i]! - key[i]!\n        if (cmp !== 0) break\n      }\n      if (cmp === 0) {\n        cmp = midKey.length - key.length\n      }\n      if (cmp === 0) {\n        return mid\n      }\n      if (cmp < 0) {\n        low = mid + 1\n      } else {\n        high = mid - 1\n      }\n    }\n    return -1\n  }\n\n  private findNextSpecialToken(\n    text: string,\n    allowedSpecial: Set<string> | undefined,\n    startIndex: number,\n  ): [startIndex: number, token: string] | undefined {\n    let searchIndex = startIndex\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      this.specialTokenPatternRegex.lastIndex = searchIndex\n      const nextSpecialMatch = this.specialTokenPatternRegex.exec(text)\n\n      if (!nextSpecialMatch) {\n        return undefined\n      }\n\n      const specialToken = nextSpecialMatch[0]\n\n      if (allowedSpecial?.has(specialToken)) {\n        const specialTokenStartIndex = nextSpecialMatch.index + searchIndex\n        return [specialTokenStartIndex, specialToken]\n      }\n\n      searchIndex = nextSpecialMatch.index + searchIndex + 1\n    }\n  }\n\n  private tryDecodeToken(tokenRank: number): Uint8Array | string | undefined {\n    const value = this.bytePairRankDecoder[tokenRank]\n    if (typeof value === 'string') {\n      return value\n    }\n    if (typeof value === 'object') {\n      const fromBinary = this.bytePairNonUtfRankDecoder.get(tokenRank)\n      if (fromBinary) {\n        return fromBinary\n      }\n    }\n    return this.specialTokensDecoder.get(tokenRank)\n  }\n\n  private addToMergeCache(key: string, value: number[]): void {\n    if (!this.mergeCache) return\n\n    if (this.mergeCache.size >= this.mergeCacheSize) {\n      // Remove least recently used item (first item)\n      const firstKey = this.mergeCache.keys().next().value!\n      this.mergeCache.delete(firstKey)\n    }\n    this.mergeCache.set(key, value)\n  }\n\n  private bytePairEncode(input: string): number[] {\n    if (input.length === 1 && isAscii(input.codePointAt(0)!)) {\n      return [this.getBpeRankFromStringOrThrow(input)]\n    }\n\n    if (this.mergeCache?.has(input)) {\n      const result = this.mergeCache.get(input)!\n      // Move to end to mark as recently used\n      this.mergeCache.delete(input)\n      this.mergeCache.set(input, result)\n      return result\n    }\n\n    const inputBytes = this.textEncoder.encode(input)\n    const result = this.bytePairMerge(inputBytes)\n    this.addToMergeCache(input, result)\n    return result\n  }\n\n  private bytePairMerge(\n    // Input array of bytes to process\n    piece: Uint8Array,\n  ): number[] {\n    // 'starts' holds the start indices of each partition\n    const starts: number[] = []\n    // 'ranks' holds the BPE ranks of each partition pair\n    const ranks: number[] = []\n\n    // Helper function to get the rank of a byte pair starting at 'startIndex'\n    const getRank = (\n      startIndex: number,\n      pairStart = starts[startIndex],\n      pairEnd = starts[startIndex + 2],\n    ): number => {\n      if (pairEnd === undefined) {\n        // No valid pair exists\n        return Number.POSITIVE_INFINITY\n      }\n\n      // Extract the byte pair\n      const key = piece.subarray(pairStart, pairEnd)\n\n      // Retrieve the BPE rank of this byte pair (if it exists)\n      const rank = this.getBpeRankFromBytes(key)\n      return rank ?? Number.POSITIVE_INFINITY\n    }\n\n    // Initialize the 'starts' array with all possible start indices\n    for (let i = 0; i <= piece.length; i++) {\n      starts.push(i)\n      if (i < piece.length - 1) {\n        // Initialize the BPE values for all adjacent pairs\n        ranks.push(getRank(i, i, i + 2))\n      } else {\n        // Initialize BPE values to infinity for the last pair\n        ranks.push(Number.POSITIVE_INFINITY)\n      }\n    }\n\n    // Iteratively merge byte pairs until no more useful merges can be done\n    while (starts.length > 1) {\n      let lowestRank = Number.POSITIVE_INFINITY\n      let lowestPartitionIndex = -1\n\n      // Find the partition with the minimum rank\n      for (let i = 0; i < ranks.length - 1; i++) {\n        const rank = ranks[i]!\n        if (rank < lowestRank) {\n          lowestRank = rank\n          lowestPartitionIndex = i\n        }\n      }\n\n      // If no valid pair is left to merge, exit the loop\n      if (\n        lowestRank === Number.POSITIVE_INFINITY ||\n        lowestPartitionIndex === -1\n      ) {\n        break\n      }\n\n      // Merge the pair at 'lowestPartitionIndex' by removing the next start index\n      starts.splice(lowestPartitionIndex + 1, 1)\n      // Remove the BPE value of the merged pair\n      ranks.splice(lowestPartitionIndex, 1)\n\n      // Update the current merged pair's rank\n      ranks[lowestPartitionIndex] = getRank(lowestPartitionIndex)\n\n      // Update the rank of the previous pair, if it exists\n      if (lowestPartitionIndex > 0) {\n        ranks[lowestPartitionIndex - 1] = getRank(lowestPartitionIndex - 1)\n      }\n    }\n\n    // Create the final output by applying the transform function to each partitioned range\n    const output: number[] = []\n    for (let i = 0; i < starts.length - 1; i++) {\n      const pairStart = starts[i]\n      const pairEnd = starts[i + 1]\n      const bpeValue = this.getBpeRankFromBytesOrThrow(\n        piece.subarray(pairStart, pairEnd),\n      )\n      output.push(bpeValue)\n    }\n    return output\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/functionCalling.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/functionCalling.ts"],"sourcesContent":["export type HarmonyTerminator = '<|end|>' | '<|return|>' | '<|call|>'\n\nexport interface ChatMessageFunctionCall {\n  name?: string\n  arguments?: string\n}\n\nexport interface ChatMessage {\n  role?: 'system' | 'user' | 'assistant' | 'developer' | (string & {})\n  name?: string\n  content: string\n  function_call?: ChatMessageFunctionCall\n  /** Harmony-only: channel label such as `analysis`, `commentary`, or `final`. */\n  channel?: string\n  /** Harmony-only: recipient metadata, e.g. `functions.get_weather` or `assistant`. */\n  recipient?: string\n  /** Controls where the recipient metadata is rendered in Harmony headers. Defaults to `channel`. */\n  recipientPlacement?: 'role' | 'channel'\n  /** Harmony-only: constraint label, e.g. `json`. */\n  constraint?: string\n  /** Harmony-only: overrides the closing token, defaults to `<|end|>`. */\n  terminator?: HarmonyTerminator\n}\n\nexport interface EncodeChatOptions {\n  primeWithAssistantResponse?: string\n}\n\nexport type ChatCompletionFunctionType =\n  | 'string'\n  | 'integer'\n  | 'number'\n  | 'boolean'\n  | 'null'\n  | 'array'\n  | 'object'\n\nexport interface ChatCompletionStringProperty {\n  type: Extract<ChatCompletionFunctionType, 'string'>\n  description?: string\n  enum?: string[]\n}\n\nexport interface ChatCompletionNumberProperty {\n  type: Extract<ChatCompletionFunctionType, 'integer' | 'number'>\n  description?: string\n  minimum?: number\n  maximum?: number\n  enum?: (number | string)[]\n}\n\nexport interface ChatCompletionBooleanProperty {\n  type: Extract<ChatCompletionFunctionType, 'boolean'>\n  description?: string\n}\n\nexport interface ChatCompletionNullProperty {\n  type: Extract<ChatCompletionFunctionType, 'null'>\n  description?: string\n}\n\nexport interface ChatCompletionArrayProperty {\n  type: Extract<ChatCompletionFunctionType, 'array'>\n  description?: string\n  items?: ChatCompletionFunctionProperty\n}\n\nexport interface ChatCompletionObjectProperty {\n  type: Extract<ChatCompletionFunctionType, 'object'>\n  description?: string\n  required?: string[]\n  properties?: Record<string, ChatCompletionFunctionProperty>\n}\n\nexport type ChatCompletionFunctionProperty =\n  | ChatCompletionStringProperty\n  | ChatCompletionNumberProperty\n  | ChatCompletionBooleanProperty\n  | ChatCompletionNullProperty\n  | ChatCompletionArrayProperty\n  | ChatCompletionObjectProperty\n\nexport interface ChatCompletionFunctionParameters\n  extends ChatCompletionObjectProperty {}\n\nexport interface ChatCompletionFunctionDefinition {\n  name: string\n  description?: string\n  parameters?: ChatCompletionFunctionParameters\n}\n\nexport type ChatCompletionFunctionCallOption =\n  | 'auto'\n  | 'none'\n  | {\n      name: string\n    }\n\nexport interface ChatCompletionRequest {\n  messages: readonly ChatMessage[]\n  functions?: readonly ChatCompletionFunctionDefinition[]\n  function_call?: ChatCompletionFunctionCallOption\n}\n\nexport type CountStringTokens = (text: string) => number\n\nexport const MESSAGE_TOKEN_OVERHEAD = 3\nexport const MESSAGE_NAME_TOKEN_OVERHEAD = 1\nexport const FUNCTION_ROLE_TOKEN_DISCOUNT = 2\nexport const FUNCTION_CALL_METADATA_TOKEN_OVERHEAD = 3\nexport const FUNCTION_DEFINITION_TOKEN_OVERHEAD = 9\nexport const COMPLETION_REQUEST_TOKEN_OVERHEAD = 3\nexport const FUNCTION_CALL_NAME_TOKEN_OVERHEAD = 4\nexport const FUNCTION_CALL_NONE_TOKEN_OVERHEAD = 1\nexport const SYSTEM_FUNCTION_TOKEN_DEDUCTION = 4\n\nconst NEWLINE = '\\n'\n\nexport function countMessageTokens(\n  message: ChatMessage,\n  countStringTokens: CountStringTokens,\n): number {\n  let tokens = 0\n\n  if (message.role) {\n    tokens += countStringTokens(message.role)\n  }\n\n  if (message.content) {\n    tokens += countStringTokens(message.content)\n  }\n\n  if (message.name) {\n    tokens += countStringTokens(message.name) + MESSAGE_NAME_TOKEN_OVERHEAD\n  }\n\n  if (message.function_call) {\n    const { name, arguments: args } = message.function_call\n    if (name) {\n      tokens += countStringTokens(name)\n    }\n    if (args) {\n      tokens += countStringTokens(args)\n    }\n    tokens += FUNCTION_CALL_METADATA_TOKEN_OVERHEAD\n  }\n\n  tokens += MESSAGE_TOKEN_OVERHEAD\n\n  if (message.role === 'function') {\n    tokens -= FUNCTION_ROLE_TOKEN_DISCOUNT\n  }\n\n  return tokens\n}\n\nexport function formatObjectProperties(\n  obj: ChatCompletionObjectProperty,\n  indent: number,\n  formatType: (param: ChatCompletionFunctionProperty, indent: number) => string,\n): string {\n  if (!obj.properties) {\n    return ''\n  }\n\n  const lines: string[] = []\n  const requiredParams = new Set(obj.required ?? [])\n  const indentString = ' '.repeat(indent)\n\n  for (const [name, param] of Object.entries(obj.properties)) {\n    if (param.description && indent < 2) {\n      lines.push(`${indentString}// ${param.description}`)\n    }\n\n    const isRequired = requiredParams.has(name)\n    const formattedType = formatType(param, indent)\n    lines.push(\n      `${indentString}${name}${isRequired ? '' : '?'}: ${formattedType},`,\n    )\n  }\n\n  return lines.join('\\n')\n}\n\nexport function formatFunctionType(\n  param: ChatCompletionFunctionProperty,\n  indent: number,\n): string {\n  switch (param.type) {\n    case 'string':\n      return (\n        param.enum?.map((value) => JSON.stringify(value)).join(' | ') ??\n        'string'\n      )\n    case 'integer':\n    case 'number':\n      return param.enum?.map((value) => `${value}`).join(' | ') ?? 'number'\n    case 'boolean':\n      return 'boolean'\n    case 'null':\n      return 'null'\n    case 'array':\n      return param.items\n        ? `${formatFunctionType(param.items, indent)}[]`\n        : 'any[]'\n    case 'object': {\n      const inner = formatObjectProperties(\n        param,\n        indent + 2,\n        formatFunctionType,\n      )\n      const closingIndent = ' '.repeat(indent)\n      return `{\n${inner}\n${closingIndent}}`\n    }\n    default:\n      return 'any'\n  }\n}\n\nexport function formatFunctionDefinitions(\n  functions: readonly ChatCompletionFunctionDefinition[],\n): string {\n  const lines = ['namespace functions {', '']\n\n  for (const fn of functions) {\n    if (fn.description) {\n      lines.push(`// ${fn.description}`)\n    }\n\n    const { parameters } = fn\n    const properties = parameters?.properties\n\n    if (!parameters || !properties || Object.keys(properties).length === 0) {\n      lines.push(`type ${fn.name} = () => any;`)\n    } else {\n      lines.push(`type ${fn.name} = (_: {`)\n      const formattedProperties = formatObjectProperties(\n        parameters,\n        0,\n        formatFunctionType,\n      )\n      if (formattedProperties.length > 0) {\n        lines.push(formattedProperties)\n      }\n      lines.push('}) => any;')\n    }\n\n    lines.push('')\n  }\n\n  lines.push('} // namespace functions')\n  return lines.join('\\n')\n}\n\nexport function estimateTokensInFunctions(\n  functions: readonly ChatCompletionFunctionDefinition[],\n  countStringTokens: CountStringTokens,\n): number {\n  const formatted = formatFunctionDefinitions(functions)\n  let tokens = countStringTokens(formatted)\n  tokens += FUNCTION_DEFINITION_TOKEN_OVERHEAD\n  return tokens\n}\n\nexport function padSystemMessage(\n  message: ChatMessage,\n  hasFunctions: boolean,\n  isSystemPadded: boolean,\n): ChatMessage {\n  if (!hasFunctions || isSystemPadded || message.role !== 'system') {\n    return message\n  }\n\n  if (!message.content || message.content.endsWith(NEWLINE)) {\n    return message\n  }\n\n  return {\n    ...message,\n    content: `${message.content}${NEWLINE}`,\n  }\n}\n\nexport function computeChatCompletionTokenCount(\n  request: ChatCompletionRequest,\n  countStringTokens: CountStringTokens,\n): number {\n  const { messages, functions, function_call: functionCall } = request\n  const hasFunctions = Boolean(functions && functions.length > 0)\n\n  let paddedSystem = false\n  let total = 0\n\n  for (const message of messages) {\n    const messageToCount = padSystemMessage(message, hasFunctions, paddedSystem)\n\n    if (messageToCount !== message && message.role === 'system') {\n      paddedSystem = true\n    } else if (message.role === 'system' && hasFunctions && !paddedSystem) {\n      paddedSystem = true\n    }\n\n    total += countMessageTokens(messageToCount, countStringTokens)\n  }\n\n  total += COMPLETION_REQUEST_TOKEN_OVERHEAD\n\n  if (hasFunctions && functions) {\n    total += estimateTokensInFunctions(functions, countStringTokens)\n\n    if (messages.some((message) => message.role === 'system')) {\n      total -= SYSTEM_FUNCTION_TOKEN_DEDUCTION\n    }\n  }\n\n  if (functionCall && functionCall !== 'auto') {\n    if (functionCall === 'none') {\n      total += FUNCTION_CALL_NONE_TOKEN_OVERHEAD\n    } else if (typeof functionCall === 'object' && functionCall.name) {\n      total +=\n        countStringTokens(functionCall.name) + FUNCTION_CALL_NAME_TOKEN_OVERHEAD\n    }\n  }\n\n  return total\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/modelsChatEnabled.gen.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/modelsChatEnabled.gen.ts"],"sourcesContent":["// This file was generated by src/codegen/generateChatEnabled.ts.\n// To regenerate, run: yarn codegen:chat-enabled.\n// Source data: src/models.ts.\nexport const chatEnabledModels = [\"chatgpt-4o-latest\",\"codex-mini-latest\",\"computer-use-preview\",\"computer-use-preview-2025-03-11\",\"gpt-3.5\",\"gpt-3.5-0301\",\"gpt-3.5-turbo\",\"gpt-3.5-turbo-0125\",\"gpt-3.5-turbo-0613\",\"gpt-3.5-turbo-1106\",\"gpt-3.5-turbo-16k-0613\",\"gpt-3.5-turbo-instruct\",\"gpt-4\",\"gpt-4-0125-preview\",\"gpt-4-0314\",\"gpt-4-0613\",\"gpt-4-1106-preview\",\"gpt-4-1106-vision-preview\",\"gpt-4-32k\",\"gpt-4-turbo\",\"gpt-4-turbo-2024-04-09\",\"gpt-4-turbo-preview\",\"gpt-4.1\",\"gpt-4.1-2025-04-14\",\"gpt-4.1-mini\",\"gpt-4.1-mini-2025-04-14\",\"gpt-4.1-nano\",\"gpt-4.1-nano-2025-04-14\",\"gpt-4.5-preview\",\"gpt-4.5-preview-2025-02-27\",\"gpt-4o\",\"gpt-4o-2024-05-13\",\"gpt-4o-2024-08-06\",\"gpt-4o-2024-11-20\",\"gpt-4o-audio-preview\",\"gpt-4o-audio-preview-2024-10-01\",\"gpt-4o-audio-preview-2024-12-17\",\"gpt-4o-audio-preview-2025-06-03\",\"gpt-4o-mini\",\"gpt-4o-mini-2024-07-18\",\"gpt-4o-mini-audio-preview\",\"gpt-4o-mini-audio-preview-2024-12-17\",\"gpt-4o-mini-search-preview\",\"gpt-4o-mini-search-preview-2025-03-11\",\"gpt-4o-search-preview\",\"gpt-4o-search-preview-2025-03-11\",\"gpt-5\",\"gpt-5-2025-08-07\",\"gpt-5-chat-latest\",\"gpt-5-codex\",\"gpt-5-mini\",\"gpt-5-mini-2025-08-07\",\"gpt-5-nano\",\"gpt-5-nano-2025-08-07\",\"gpt-5-pro\",\"gpt-5-pro-2025-10-06\",\"gpt-audio\",\"gpt-audio-2025-08-28\",\"gpt-audio-mini\",\"gpt-audio-mini-2025-10-06\",\"gpt-oss-120b\",\"gpt-oss-20b\",\"o1\",\"o1-2024-12-17\",\"o1-mini\",\"o1-mini-2024-09-12\",\"o1-preview\",\"o1-preview-2024-09-12\",\"o1-pro\",\"o1-pro-2025-03-19\",\"o3\",\"o3-2025-04-16\",\"o3-deep-research\",\"o3-deep-research-2025-06-26\",\"o3-mini\",\"o3-mini-2025-01-31\",\"o3-pro\",\"o3-pro-2025-06-10\",\"o4-mini\",\"o4-mini-2025-04-16\",\"o4-mini-deep-research\",\"o4-mini-deep-research-2025-06-26\"] as const;\n"],"names":[],"mappings":"AAAA,iEAAiE;AACjE,iDAAiD;AACjD,8BAA8B;;;;;AACvB,MAAM,iBAAiB,GAAG;IAAC,mBAAmB;IAAC,mBAAmB;IAAC,sBAAsB;IAAC,iCAAiC;IAAC,SAAS;IAAC,cAAc;IAAC,eAAe;IAAC,oBAAoB;IAAC,oBAAoB;IAAC,oBAAoB;IAAC,wBAAwB;IAAC,wBAAwB;IAAC,OAAO;IAAC,oBAAoB;IAAC,YAAY;IAAC,YAAY;IAAC,oBAAoB;IAAC,2BAA2B;IAAC,WAAW;IAAC,aAAa;IAAC,wBAAwB;IAAC,qBAAqB;IAAC,SAAS;IAAC,oBAAoB;IAAC,cAAc;IAAC,yBAAyB;IAAC,cAAc;IAAC,yBAAyB;IAAC,iBAAiB;IAAC,4BAA4B;IAAC,QAAQ;IAAC,mBAAmB;IAAC,mBAAmB;IAAC,mBAAmB;IAAC,sBAAsB;IAAC,iCAAiC;IAAC,iCAAiC;IAAC,iCAAiC;IAAC,aAAa;IAAC,wBAAwB;IAAC,2BAA2B;IAAC,sCAAsC;IAAC,4BAA4B;IAAC,uCAAuC;IAAC,uBAAuB;IAAC,kCAAkC;IAAC,OAAO;IAAC,kBAAkB;IAAC,mBAAmB;IAAC,aAAa;IAAC,YAAY;IAAC,uBAAuB;IAAC,YAAY;IAAC,uBAAuB;IAAC,WAAW;IAAC,sBAAsB;IAAC,WAAW;IAAC,sBAAsB;IAAC,gBAAgB;IAAC,2BAA2B;IAAC,cAAc;IAAC,aAAa;IAAC,IAAI;IAAC,eAAe;IAAC,SAAS;IAAC,oBAAoB;IAAC,YAAY;IAAC,uBAAuB;IAAC,QAAQ;IAAC,mBAAmB;IAAC,IAAI;IAAC,eAAe;IAAC,kBAAkB;IAAC,6BAA6B;IAAC,SAAS;IAAC,oBAAoB;IAAC,QAAQ;IAAC,mBAAmB;IAAC,SAAS;IAAC,oBAAoB;IAAC,uBAAuB;IAAC,kCAAkC;CAAU,CAAC"}},
    {"offset": {"line": 848, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/modelsMap.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/modelsMap.ts"],"sourcesContent":["/* eslint-disable camelcase */\n\nimport type { ModelName } from './mapping.js'\n\n// reference: https://github.com/openai/tiktoken/blob/4560a8896f5fb1d35c6f8fd6eee0399f9a1a27ca/tiktoken/model.py\n\n// --- p50k_base models ---\nexport const p50k_base: readonly string[] = [\n  // legacy models\n  'text-davinci-002',\n  'text-davinci-003',\n  'code-davinci-001',\n  'code-davinci-002',\n  'davinci-codex',\n  'code-cushman-001',\n  'code-cushman-002',\n  'cushman-codex',\n] as const satisfies ModelName[]\n\n// --- r50k_base models ---\nexport const r50k_base: readonly string[] = [\n  // legacy models\n  'text-ada-001',\n  'text-babbage-001',\n  'text-curie-001',\n  'text-davinci-001',\n  'ada',\n  'babbage',\n  'curie',\n  'davinci',\n  'code-search-ada-code-001',\n  'code-search-ada-text-001',\n  'text-similarity-ada-001',\n  'text-search-ada-doc-001',\n  'text-search-ada-query-001',\n  'text-similarity-babbage-001',\n  'text-search-babbage-doc-001',\n  'text-search-babbage-query-001',\n  'code-search-babbage-code-001',\n  'code-search-babbage-text-001',\n  'text-similarity-curie-001',\n  'text-search-curie-doc-001',\n  'text-search-curie-query-001',\n  'text-similarity-davinci-001',\n  'text-search-davinci-doc-001',\n  'text-search-davinci-query-001',\n] as const satisfies ModelName[]\n\n// --- p50k_edit models ---\nexport const p50k_edit: readonly string[] = [\n  'code-davinci-edit-001',\n  'text-davinci-edit-001',\n] as const satisfies ModelName[]\n\n// --- cl100k_base models ---\nexport const cl100k_base: readonly string[] = [\n  // all gpt-3.5 models:\n  'gpt-3.5',\n  'gpt-3.5-0301',\n  'gpt-3.5-turbo',\n  'gpt-3.5-turbo-0125',\n  'gpt-3.5-turbo-0613',\n  'gpt-3.5-turbo-1106',\n  'gpt-3.5-turbo-16k-0613',\n  'gpt-3.5-turbo-instruct',\n  // all gpt-4.0 models:\n  'gpt-4',\n  'gpt-4-0125-preview',\n  'gpt-4-0314',\n  'gpt-4-0613',\n  'gpt-4-1106-preview',\n  'gpt-4-1106-vision-preview',\n  'gpt-4-32k',\n  'gpt-4-turbo',\n  'gpt-4-turbo-2024-04-09',\n  'gpt-4-turbo-preview',\n  // embedding models:\n  'text-embedding-3-large',\n  'text-embedding-3-small',\n  'text-embedding-ada-002',\n  // still supported models:\n  'babbage-002',\n  'davinci-002',\n] as const satisfies ModelName[]\n\n// all new proprietary models use o200k_base, hence we don't need to list them here\n// (e.g. chatgpt-4o-latest, gpt-5, o1, etc.)\n// --- o200k_base models ---\nexport const o200k_base: readonly string[] = [] as const satisfies ModelName[]\n\n// --- o200k_harmony models ---\nexport const o200k_harmony: readonly string[] = [\n  'gpt-oss-20b',\n  'gpt-oss-120b',\n] as const satisfies ModelName[]\n"],"names":[],"mappings":"AAAA,4BAAA,EAA8B,CAI9B,gHAAgH;AAEhH,2BAA2B;;;;;;;;;;;;;;;AACpB,MAAM,SAAS,GAAsB;IAC1C,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;CACe,CAAA;AAGzB,MAAM,SAAS,GAAsB;IAC1C,gBAAgB;IAChB,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,KAAK;IACL,SAAS;IACT,OAAO;IACP,SAAS;IACT,0BAA0B;IAC1B,0BAA0B;IAC1B,yBAAyB;IACzB,yBAAyB;IACzB,2BAA2B;IAC3B,6BAA6B;IAC7B,6BAA6B;IAC7B,+BAA+B;IAC/B,8BAA8B;IAC9B,8BAA8B;IAC9B,2BAA2B;IAC3B,2BAA2B;IAC3B,6BAA6B;IAC7B,6BAA6B;IAC7B,6BAA6B;IAC7B,+BAA+B;CACD,CAAA;AAGzB,MAAM,SAAS,GAAsB;IAC1C,uBAAuB;IACvB,uBAAuB;CACO,CAAA;AAGzB,MAAM,WAAW,GAAsB;IAC5C,sBAAsB;IACtB,SAAS;IACT,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,oBAAoB;IACpB,oBAAoB;IACpB,wBAAwB;IACxB,wBAAwB;IACxB,sBAAsB;IACtB,OAAO;IACP,oBAAoB;IACpB,YAAY;IACZ,YAAY;IACZ,oBAAoB;IACpB,2BAA2B;IAC3B,WAAW;IACX,aAAa;IACb,wBAAwB;IACxB,qBAAqB;IACrB,oBAAoB;IACpB,wBAAwB;IACxB,wBAAwB;IACxB,wBAAwB;IACxB,0BAA0B;IAC1B,aAAa;IACb,aAAa;CACiB,CAAA;AAKzB,MAAM,UAAU,GAAsB,EAAiC,CAAA;AAGvE,MAAM,aAAa,GAAsB;IAC9C,aAAa;IACb,cAAc;CACgB,CAAA"}},
    {"offset": {"line": 944, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/specialTokens.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/specialTokens.ts"],"sourcesContent":["export const EndOfText = '<|endoftext|>'\nexport const FimPrefix = '<|fim_prefix|>'\nexport const FimMiddle = '<|fim_middle|>'\nexport const FimSuffix = '<|fim_suffix|>'\nexport const ImStart = '<|im_start|>' // 100264\nexport const ImEnd = '<|im_end|>' // 100265\nexport const ImSep = '<|im_sep|>' // 100266\nexport const EndOfPrompt = '<|endofprompt|>'\nexport const HarmonyStartOfText = '<|startoftext|>'\nexport const HarmonyStart = '<|start|>'\nexport const HarmonyEnd = '<|end|>'\nexport const HarmonyMessage = '<|message|>'\nexport const HarmonyChannel = '<|channel|>'\nexport const HarmonyReturn = '<|return|>'\nexport const HarmonyConstrain = '<|constrain|>'\nexport const HarmonyCall = '<|call|>'\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,SAAS,GAAG,eAAe,CAAA;AACjC,MAAM,SAAS,GAAG,gBAAgB,CAAA;AAClC,MAAM,SAAS,GAAG,gBAAgB,CAAA;AAClC,MAAM,SAAS,GAAG,gBAAgB,CAAA;AAClC,MAAM,OAAO,GAAG,cAAc,CAAA,CAAC,SAAS;AACxC,MAAM,KAAK,GAAG,YAAY,CAAA,CAAC,SAAS;AACpC,MAAM,KAAK,GAAG,YAAY,CAAA,CAAC,SAAS;AACpC,MAAM,WAAW,GAAG,iBAAiB,CAAA;AACrC,MAAM,kBAAkB,GAAG,iBAAiB,CAAA;AAC5C,MAAM,YAAY,GAAG,WAAW,CAAA;AAChC,MAAM,UAAU,GAAG,SAAS,CAAA;AAC5B,MAAM,cAAc,GAAG,aAAa,CAAA;AACpC,MAAM,cAAc,GAAG,aAAa,CAAA;AACpC,MAAM,aAAa,GAAG,YAAY,CAAA;AAClC,MAAM,gBAAgB,GAAG,eAAe,CAAA;AACxC,MAAM,WAAW,GAAG,UAAU,CAAA"}},
    {"offset": {"line": 998, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/mapping.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/mapping.ts"],"sourcesContent":["/* eslint-disable camelcase */\n\nimport { chatEnabledModels } from './modelsChatEnabled.gen.js'\nimport * as encodingsMap from './modelsMap.js'\nimport { ImSep } from './specialTokens.js'\n\nexport const cl100k_base = 'cl100k_base'\nexport const p50k_base = 'p50k_base'\nexport const p50k_edit = 'p50k_edit'\nexport const r50k_base = 'r50k_base'\nexport const o200k_base = 'o200k_base'\nexport const o200k_harmony = 'o200k_harmony'\n\nexport const DEFAULT_ENCODING = o200k_base\n\nexport type EncodingName = keyof typeof encodingsMap\nexport const encodingNames = [\n  p50k_base,\n  r50k_base,\n  p50k_edit,\n  cl100k_base,\n  o200k_base,\n  o200k_harmony,\n] as const satisfies EncodingName[]\n\n/**\n * maps model names to encoding names\n * if a model is not listed, it uses the default encoding for new models\n * which is `o200k_base`\n */\nexport const modelToEncodingMap = Object.fromEntries(\n  Object.entries(encodingsMap).flatMap(([encodingName, models]) =>\n    models.map((modelName) => [modelName, encodingName]),\n  ),\n) as Record<ModelName, EncodingName>\n\nexport interface ChatParameters {\n  messageSeparator: string\n  roleSeparator: string\n}\n\nconst gpt3params = {\n  messageSeparator: '\\n',\n  roleSeparator: '\\n',\n}\n\nconst gpt4params = {\n  messageSeparator: '',\n  roleSeparator: ImSep,\n}\n\nexport type ModelName = keyof typeof import('./models.js')\nexport type ChatModelName = (typeof chatEnabledModels)[number]\n\nexport const chatModelParams = Object.fromEntries(\n  chatEnabledModels.flatMap((modelName) =>\n    modelName.startsWith('gpt-3.5')\n      ? ([[modelName, gpt3params] as const] as const)\n      : ([[modelName, gpt4params] as const] as const),\n  ),\n) as Record<ChatModelName, ChatParameters>\n"],"names":[],"mappings":"AAAA,4BAAA,EAA8B;;;;;;;;;;;;;;;;;;;;;;AAE9B,OAAO,EAAE,iBAAiB,EAAE,MAAM,4BAA4B,CAAA;AAC9D,OAAO,KAAK,YAAY,MAAM,gBAAgB,CAAA;AAC9C,OAAO,EAAE,KAAK,EAAE,MAAM,oBAAoB,CAAA;;;;AAEnC,MAAM,WAAW,GAAG,aAAa,CAAA;AACjC,MAAM,SAAS,GAAG,WAAW,CAAA;AAC7B,MAAM,SAAS,GAAG,WAAW,CAAA;AAC7B,MAAM,SAAS,GAAG,WAAW,CAAA;AAC7B,MAAM,UAAU,GAAG,YAAY,CAAA;AAC/B,MAAM,aAAa,GAAG,eAAe,CAAA;AAErC,MAAM,gBAAgB,GAAG,UAAU,CAAA;AAGnC,MAAM,aAAa,GAAG;IAC3B,SAAS;IACT,SAAS;IACT,SAAS;IACT,WAAW;IACX,UAAU;IACV,aAAa;CACoB,CAAA;AAO5B,MAAM,kBAAkB,GAAG,MAAM,CAAC,WAAW,CAClD,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,sMAAC,OAAO,CAAC,CAAC,CAAC,YAAY,EAAE,MAAM,CAAC,EAAE,CAC5D,CAD8D,KACxD,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,CAAG,CAAD;YAAE,SAAS;YAAE,YAAY;SAAC,CAAC,CACrD,CACiC,CAAA;AAOpC,MAAM,UAAU,GAAG;IACjB,gBAAgB,EAAE,IAAI;IACtB,aAAa,EAAE,IAAI;CACpB,CAAA;AAED,MAAM,UAAU,GAAG;IACjB,gBAAgB,EAAE,EAAE;IACpB,aAAa,EAAE,8NAAK;CACrB,CAAA;AAKM,MAAM,eAAe,GAAG,MAAM,CAAC,WAAW,CAC/C,qPAAiB,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,CACpC,CADsC,QAC7B,CAAC,UAAU,CAAC,SAAS,CAAC,GAC1B;QAAC;YAAC,SAAS;YAAE,UAAU;SAAU;KAAW,GAC5C;QAAC;YAAC,SAAS;YAAE,UAAU;SAAU;KAAW,CAClD,CACuC,CAAA"}},
    {"offset": {"line": 1068, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/constants.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/constants.ts"],"sourcesContent":["export const R50K_TOKEN_SPLIT_REGEX =\n  /'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+/gu\n\nconst CONTRACTION_SUFFIX_PATTERN = String.raw`'(?:[sS]|[dD]|[mM]|[tT]|[lL][lL]|[vV][eE]|[rR][eE])`\n\nconst OPTIONAL_CONTRACTION_SUFFIX = String.raw`(?:${CONTRACTION_SUFFIX_PATTERN})?`\n\nconst CL100K_TOKEN_SPLIT_PATTERN = String.raw`${CONTRACTION_SUFFIX_PATTERN}|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s+$|\\s*[\\r\\n]|\\s+(?!\\S)|\\s`\n\nexport const CL100K_TOKEN_SPLIT_REGEX = new RegExp(\n  CL100K_TOKEN_SPLIT_PATTERN,\n  'gu',\n)\n\nconst O200K_TOKEN_SPLIT_PATTERN = String.raw`[^\\r\\n\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+${OPTIONAL_CONTRACTION_SUFFIX}|[^\\r\\n\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*${OPTIONAL_CONTRACTION_SUFFIX}|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+`\n\nexport const O200K_TOKEN_SPLIT_REGEX = new RegExp(\n  O200K_TOKEN_SPLIT_PATTERN,\n  'gu',\n)\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,sBAAsB,GACjC,8EAA8E,CAAA;AAEhF,MAAM,0BAA0B,GAAG,MAAM,CAAC,GAAG,CAAA,mDAAA,CAAqD,CAAA;AAElG,MAAM,2BAA2B,GAAG,MAAM,CAAC,GAAG,CAAA,GAAA,EAAM,0BAA0B,CAAA,EAAA,CAAI,CAAA;AAElF,MAAM,0BAA0B,GAAG,MAAM,CAAC,GAAG,CAAA,EAAG,0BAA0B,CAAA,0FAAA,CAA4F,CAAA;AAE/J,MAAM,wBAAwB,GAAG,IAAI,MAAM,CAChD,0BAA0B,EAC1B,IAAI,CACL,CAAA;AAED,MAAM,yBAAyB,GAAG,MAAM,CAAC,GAAG,CAAA,4EAAA,EAA+E,2BAA2B,CAAA,6EAAA,EAAgF,2BAA2B,CAAA,+DAAA,CAAiE,CAAA;AAE3T,MAAM,uBAAuB,GAAG,IAAI,MAAM,CAC/C,yBAAyB,EACzB,IAAI,CACL,CAAA"}},
    {"offset": {"line": 1087, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/cl100k_base.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/cl100k_base.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport type { EncodingParams } from '../modelParams.js'\nimport {\n  EndOfPrompt,\n  EndOfText,\n  FimMiddle,\n  FimPrefix,\n  FimSuffix,\n  ImEnd,\n  ImSep,\n  ImStart,\n} from '../specialTokens.js'\nimport { CL100K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nexport function Cl100KBase(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  const specialTokenMapping = new Map<string, number>([\n    [EndOfText, 100_257],\n    [FimPrefix, 100_258],\n    [FimMiddle, 100_259],\n    [FimSuffix, 100_260],\n    [ImStart, 100_264],\n    [ImEnd, 100_265],\n    [ImSep, 100_266],\n    [EndOfPrompt, 100_276],\n  ])\n\n  return {\n    tokenSplitRegex: CL100K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder: specialTokenMapping,\n  }\n}\n"],"names":[],"mappings":";;;;AAGA,OAAO,EACL,WAAW,EACX,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,KAAK,EACL,KAAK,EACL,OAAO,GACR,MAAM,qBAAqB,CAAA;AAC5B,OAAO,EAAE,wBAAwB,EAAE,MAAM,gBAAgB,CAAA;;;AAEnD,SAAU,UAAU,CACxB,mBAAqC;IAErC,MAAM,mBAAmB,GAAG,IAAI,GAAG,CAAiB;QAClD;YAAC,kOAAS;YAAE,OAAO;SAAC;QACpB;YAAC,kOAAS;YAAE,OAAO;SAAC;QACpB;YAAC,kOAAS;YAAE,OAAO;SAAC;QACpB;YAAC,kOAAS;YAAE,OAAO;SAAC;QACpB;YAAC,gOAAO;YAAE,OAAO;SAAC;QAClB;YAAC,8NAAK;YAAE,OAAO;SAAC;QAChB;YAAC,8NAAK;YAAE,OAAO;SAAC;QAChB;YAAC,oOAAW;YAAE,OAAO;SAAC;KACvB,CAAC,CAAA;IAEF,OAAO;QACL,eAAe,EAAE,+PAAwB;QACzC,mBAAmB;QACnB,oBAAoB,EAAE,mBAAmB;KAC1C,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1140, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/o200k_base.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/o200k_base.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport type { EncodingParams } from '../modelParams.js'\nimport {\n  EndOfPrompt,\n  EndOfText,\n  FimMiddle,\n  FimPrefix,\n  FimSuffix,\n  ImEnd,\n  ImSep,\n  ImStart,\n} from '../specialTokens.js'\nimport { O200K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nconst O200K_BASE_SPECIAL_TOKEN_ENTRIES = [\n  [EndOfText, 199_999],\n  [FimPrefix, 200_000],\n  [FimMiddle, 200_001],\n  [FimSuffix, 200_002],\n  [ImStart, 200_003],\n  [ImEnd, 200_004],\n  [ImSep, 200_005],\n  [EndOfPrompt, 200_006],\n] as const satisfies readonly (readonly [string, number])[]\n\nexport const createO200KSpecialTokenMap = () =>\n  new Map<string, number>(O200K_BASE_SPECIAL_TOKEN_ENTRIES)\n\nexport function O200KBase(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  return {\n    tokenSplitRegex: O200K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder: createO200KSpecialTokenMap(),\n  }\n}\n"],"names":[],"mappings":";;;;;;AAGA,OAAO,EACL,WAAW,EACX,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,KAAK,EACL,KAAK,EACL,OAAO,GACR,MAAM,qBAAqB,CAAA;AAC5B,OAAO,EAAE,uBAAuB,EAAE,MAAM,gBAAgB,CAAA;;;AAExD,MAAM,gCAAgC,GAAG;IACvC;QAAC,kOAAS;QAAE,OAAO;KAAC;IACpB;QAAC,kOAAS;QAAE,OAAO;KAAC;IACpB;QAAC,kOAAS;QAAE,OAAO;KAAC;IACpB;QAAC,kOAAS;QAAE,OAAO;KAAC;IACpB;QAAC,gOAAO;QAAE,OAAO;KAAC;IAClB;QAAC,8NAAK;QAAE,OAAO;KAAC;IAChB;QAAC,8NAAK;QAAE,OAAO;KAAC;IAChB;QAAC,oOAAW;QAAE,OAAO;KAAC;CACmC,CAAA;AAEpD,MAAM,0BAA0B,GAAG,GAAG,CAC3C,CAD6C,GACzC,GAAG,CAAiB,gCAAgC,CAAC,CAAA;AAErD,SAAU,SAAS,CACvB,mBAAqC;IAErC,OAAO;QACL,eAAe,EAAE,8PAAuB;QACxC,mBAAmB;QACnB,oBAAoB,EAAE,0BAA0B,EAAE;KACnD,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1196, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/o200k_harmony.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/o200k_harmony.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport type { EncodingParams } from '../modelParams.js'\nimport {\n  EndOfPrompt,\n  EndOfText,\n  HarmonyCall,\n  HarmonyChannel,\n  HarmonyConstrain,\n  HarmonyEnd,\n  HarmonyMessage,\n  HarmonyReturn,\n  HarmonyStart,\n  HarmonyStartOfText,\n} from '../specialTokens.js'\nimport { O200K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nconst RESERVED_TOKEN_RANGE_START = 200_013\nconst RESERVED_TOKEN_RANGE_END = 201_088 // exclusive upper bound per tiktoken\n\nconst STATIC_SPECIAL_TOKEN_ENTRIES = [\n  [HarmonyStartOfText, 199_998],\n  [EndOfText, 199_999],\n  ['<|reserved_200000|>', 200_000],\n  ['<|reserved_200001|>', 200_001],\n  [HarmonyReturn, 200_002],\n  [HarmonyConstrain, 200_003],\n  ['<|reserved_200004|>', 200_004],\n  [HarmonyChannel, 200_005],\n  [HarmonyStart, 200_006],\n  [HarmonyEnd, 200_007],\n  [HarmonyMessage, 200_008],\n  ['<|reserved_200009|>', 200_009],\n  ['<|reserved_200010|>', 200_010],\n  ['<|reserved_200011|>', 200_011],\n  [HarmonyCall, 200_012],\n] as const satisfies readonly (readonly [string, number])[]\n\nexport function O200KHarmony(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  const specialTokensEncoder = new Map<string, number>(\n    STATIC_SPECIAL_TOKEN_ENTRIES,\n  )\n\n  for (\n    let tokenId = RESERVED_TOKEN_RANGE_START;\n    tokenId < RESERVED_TOKEN_RANGE_END;\n    tokenId += 1\n  ) {\n    specialTokensEncoder.set(`<|reserved_${tokenId}|>`, tokenId)\n  }\n\n  specialTokensEncoder.set(EndOfPrompt, 200_018)\n\n  return {\n    tokenSplitRegex: O200K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder,\n    chatFormatter: 'harmony',\n  }\n}\n"],"names":[],"mappings":";;;;AAGA,OAAO,EACL,WAAW,EACX,SAAS,EACT,WAAW,EACX,cAAc,EACd,gBAAgB,EAChB,UAAU,EACV,cAAc,EACd,aAAa,EACb,YAAY,EACZ,kBAAkB,GACnB,MAAM,qBAAqB,CAAA;AAC5B,OAAO,EAAE,uBAAuB,EAAE,MAAM,gBAAgB,CAAA;;;AAExD,MAAM,0BAA0B,GAAG,OAAO,CAAA;AAC1C,MAAM,wBAAwB,GAAG,OAAO,CAAA,CAAC,qCAAqC;AAE9E,MAAM,4BAA4B,GAAG;IACnC;QAAC,2OAAkB;QAAE,OAAO;KAAC;IAC7B;QAAC,kOAAS;QAAE,OAAO;KAAC;IACpB;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,sOAAa;QAAE,OAAO;KAAC;IACxB;QAAC,yOAAgB;QAAE,OAAO;KAAC;IAC3B;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,uOAAc;QAAE,OAAO;KAAC;IACzB;QAAC,qOAAY;QAAE,OAAO;KAAC;IACvB;QAAC,mOAAU;QAAE,OAAO;KAAC;IACrB;QAAC,uOAAc;QAAE,OAAO;KAAC;IACzB;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,qBAAqB;QAAE,OAAO;KAAC;IAChC;QAAC,oOAAW;QAAE,OAAO;KAAC;CACmC,CAAA;AAErD,SAAU,YAAY,CAC1B,mBAAqC;IAErC,MAAM,oBAAoB,GAAG,IAAI,GAAG,CAClC,4BAA4B,CAC7B,CAAA;IAED,IACE,IAAI,OAAO,GAAG,0BAA0B,EACxC,OAAO,GAAG,wBAAwB,EAClC,OAAO,IAAI,CAAC,CACZ,CAAC;QACD,oBAAoB,CAAC,GAAG,CAAC,CAAA,WAAA,EAAc,OAAO,CAAA,EAAA,CAAI,EAAE,OAAO,CAAC,CAAA;IAC9D,CAAC;IAED,oBAAoB,CAAC,GAAG,CAAC,oOAAW,EAAE,OAAO,CAAC,CAAA;IAE9C,OAAO;QACL,eAAe,EAAE,8PAAuB;QACxC,mBAAmB;QACnB,oBAAoB;QACpB,aAAa,EAAE,SAAS;KACzB,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1285, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/p50k_base.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/p50k_base.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport { type EncodingParams } from '../modelParams.js'\nimport { EndOfText } from '../specialTokens.js'\nimport { R50K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nexport function P50KBase(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  return {\n    expectedVocabularySize: 50_281,\n    tokenSplitRegex: R50K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder: new Map<string, number>([[EndOfText, 50_256]]),\n  }\n}\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAuB,MAAM,mBAAmB,CAAA;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,qBAAqB,CAAA;AAC/C,OAAO,EAAE,sBAAsB,EAAE,MAAM,gBAAgB,CAAA;;;;AAEjD,SAAU,QAAQ,CACtB,mBAAqC;IAErC,OAAO;QACL,sBAAsB,EAAE,MAAM;QAC9B,eAAe,EAAE,6PAAsB;QACvC,mBAAmB;QACnB,oBAAoB,EAAE,IAAI,GAAG,CAAiB;YAAC;gBAAC,kOAAS;gBAAE,MAAM;aAAC;SAAC,CAAC;KACrE,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/p50k_edit.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/p50k_edit.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport { type EncodingParams } from '../modelParams.js'\nimport { EndOfText, FimMiddle, FimPrefix, FimSuffix } from '../specialTokens.js'\nimport { R50K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nexport function P50KEdit(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  const specialTokenMapping = new Map<string, number>([\n    [EndOfText, 50_256],\n    [FimPrefix, 50_281],\n    [FimMiddle, 50_282],\n    [FimSuffix, 50_283],\n  ])\n\n  return {\n    tokenSplitRegex: R50K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder: specialTokenMapping,\n  }\n}\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAuB,MAAM,mBAAmB,CAAA;AACvD,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,qBAAqB,CAAA;AAChF,OAAO,EAAE,sBAAsB,EAAE,MAAM,gBAAgB,CAAA;;;;AAEjD,SAAU,QAAQ,CACtB,mBAAqC;IAErC,MAAM,mBAAmB,GAAG,IAAI,GAAG,CAAiB;QAClD;YAAC,kOAAS;YAAE,MAAM;SAAC;QACnB;YAAC,kOAAS;YAAE,MAAM;SAAC;QACnB;YAAC,kOAAS;YAAE,MAAM;SAAC;QACnB;YAAC,kOAAS;YAAE,MAAM;SAAC;KACpB,CAAC,CAAA;IAEF,OAAO;QACL,eAAe,EAAE,6PAAsB;QACvC,mBAAmB;QACnB,oBAAoB,EAAE,mBAAmB;KAC1C,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1351, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encodingParams/r50k_base.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encodingParams/r50k_base.ts"],"sourcesContent":["/* eslint-disable no-magic-numbers */\nimport type { RawBytePairRanks } from '../BytePairEncodingCore.js'\nimport { type EncodingParams } from '../modelParams.js'\nimport { EndOfText } from '../specialTokens.js'\nimport { R50K_TOKEN_SPLIT_REGEX } from './constants.js'\n\nexport function R50KBase(\n  bytePairRankDecoder: RawBytePairRanks,\n): EncodingParams {\n  return {\n    expectedVocabularySize: 50_257,\n    tokenSplitRegex: R50K_TOKEN_SPLIT_REGEX,\n    bytePairRankDecoder,\n    specialTokensEncoder: new Map<string, number>([[EndOfText, 50_256]]),\n  }\n}\n"],"names":[],"mappings":";;;;AAEA,OAAO,EAAuB,MAAM,mBAAmB,CAAA;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,qBAAqB,CAAA;AAC/C,OAAO,EAAE,sBAAsB,EAAE,MAAM,gBAAgB,CAAA;;;;AAEjD,SAAU,QAAQ,CACtB,mBAAqC;IAErC,OAAO;QACL,sBAAsB,EAAE,MAAM;QAC9B,eAAe,EAAE,6PAAsB;QACvC,mBAAmB;QACnB,oBAAoB,EAAE,IAAI,GAAG,CAAiB;YAAC;gBAAC,kOAAS;gBAAE,MAAM;aAAC;SAAC,CAAC;KACrE,CAAA;AACH,CAAC"}},
    {"offset": {"line": 1378, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/modelParams.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/modelParams.ts"],"sourcesContent":["import type {\n  BytePairEncodingConfig,\n  RawBytePairRanks,\n} from './BytePairEncodingCore.js'\nimport { Cl100KBase } from './encodingParams/cl100k_base.js'\nimport { O200KBase } from './encodingParams/o200k_base.js'\nimport { O200KHarmony } from './encodingParams/o200k_harmony.js'\nimport { P50KBase } from './encodingParams/p50k_base.js'\nimport { P50KEdit } from './encodingParams/p50k_edit.js'\nimport { R50KBase } from './encodingParams/r50k_base.js'\nimport type { EncodingName, ModelName } from './mapping.js'\nimport type { ModelSpec } from './modelTypes.js'\n\nexport type ChatFormatter = 'chatml' | 'harmony'\n\nexport interface EncodingParams extends BytePairEncodingConfig {\n  /**\n   * The expected total number of tokens in the vocabulary, including both regular and special tokens.\n   * This parameter is used to ensure that the combined number of regular and special tokens matches the expected total.\n   */\n  expectedVocabularySize?: number\n  /**\n   * A regular expression that is designed to tokenize or break up a text into parts\n   * that can be contractions, letters, numbers, or other characters,\n   * while handling line terminators and spaces in a specific manner.\n   * It's complex due to its need to deal with a wide variety of cases in text processing.\n   */\n  tokenSplitRegex: RegExp\n  specialTokensEncoder: Map<string, number>\n  modelName?: ModelName\n  modelSpec?: ModelSpec\n  chatFormatter?: ChatFormatter\n}\n\nexport type GetMergeableRanksFn = (\n  encodingName: EncodingName,\n) => RawBytePairRanks\n\nexport function getEncodingParams(\n  encodingName: EncodingName,\n  getMergeableRanks: GetMergeableRanksFn,\n): EncodingParams {\n  const mergeableBytePairRanks = getMergeableRanks(encodingName)\n  switch (encodingName.toLowerCase()) {\n    case 'r50k_base':\n      return R50KBase(mergeableBytePairRanks)\n\n    case 'p50k_base':\n      return P50KBase(mergeableBytePairRanks)\n\n    case 'p50k_edit':\n      return P50KEdit(mergeableBytePairRanks)\n\n    case 'cl100k_base':\n      return Cl100KBase(mergeableBytePairRanks)\n\n    case 'o200k_base':\n      return O200KBase(mergeableBytePairRanks)\n\n    case 'o200k_harmony':\n      return O200KHarmony(mergeableBytePairRanks)\n\n    default:\n      throw new Error(`Unknown encoding name: ${encodingName}`)\n  }\n}\n"],"names":[],"mappings":";;;;AAIA,OAAO,EAAE,UAAU,EAAE,MAAM,iCAAiC,CAAA;AAC5D,OAAO,EAAE,SAAS,EAAE,MAAM,gCAAgC,CAAA;AAC1D,OAAO,EAAE,YAAY,EAAE,MAAM,mCAAmC,CAAA;AAChE,OAAO,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAA;AACxD,OAAO,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAA;AACxD,OAAO,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAA;;;;;;;AA6BlD,SAAU,iBAAiB,CAC/B,YAA0B,EAC1B,iBAAsC;IAEtC,MAAM,sBAAsB,GAAG,iBAAiB,CAAC,YAAY,CAAC,CAAA;IAC9D,OAAQ,YAAY,CAAC,WAAW,EAAE,EAAE,CAAC;QACnC,KAAK,WAAW;YACd,WAAO,+OAAQ,EAAC,sBAAsB,CAAC,CAAA;QAEzC,KAAK,WAAW;YACd,WAAO,+OAAQ,EAAC,sBAAsB,CAAC,CAAA;QAEzC,KAAK,WAAW;YACd,WAAO,+OAAQ,EAAC,sBAAsB,CAAC,CAAA;QAEzC,KAAK,aAAa;YAChB,WAAO,mPAAU,EAAC,sBAAsB,CAAC,CAAA;QAE3C,KAAK,YAAY;YACf,WAAO,iPAAS,EAAC,sBAAsB,CAAC,CAAA;QAE1C,KAAK,eAAe;YAClB,WAAO,uPAAY,EAAC,sBAAsB,CAAC,CAAA;QAE7C;YACE,MAAM,IAAI,KAAK,CAAC,CAAA,uBAAA,EAA0B,YAAY,EAAE,CAAC,CAAA;IAC7D,CAAC;AACH,CAAC"}},
    {"offset": {"line": 1417, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/GptEncoding.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/GptEncoding.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/member-ordering */\n/* eslint-disable no-param-reassign */\nimport { BytePairEncodingCore, decoder } from './BytePairEncodingCore.js'\nimport { ALL_SPECIAL_TOKENS } from './constants.js'\nimport {\n  type ChatCompletionRequest,\n  type ChatMessage,\n  type EncodeChatOptions,\n  type HarmonyTerminator,\n  computeChatCompletionTokenCount,\n} from './functionCalling.js'\nimport {\n  type ChatModelName,\n  type ChatParameters,\n  type EncodingName,\n  type ModelName,\n  chatModelParams,\n  DEFAULT_ENCODING,\n  modelToEncodingMap,\n} from './mapping.js'\nimport {\n  type ChatFormatter,\n  type EncodingParams,\n  type GetMergeableRanksFn,\n  getEncodingParams,\n} from './modelParams.js'\nimport type { ModelSpec, PriceData } from './modelTypes.js'\nimport {\n  EndOfPrompt,\n  EndOfText,\n  FimMiddle,\n  FimPrefix,\n  FimSuffix,\n  HarmonyCall,\n  HarmonyChannel,\n  HarmonyConstrain,\n  HarmonyEnd,\n  HarmonyMessage,\n  HarmonyReturn,\n  HarmonyStart,\n  ImEnd,\n  ImSep,\n  ImStart,\n} from './specialTokens.js'\nimport { endsWithIncompleteUtfPairSurrogate } from './utfUtil.js'\nimport { getMaxValueFromMap, getSpecialTokenRegex } from './util.js'\n\nexport type {\n  ChatCompletionArrayProperty,\n  ChatCompletionBooleanProperty,\n  ChatCompletionFunctionCallOption,\n  ChatCompletionFunctionDefinition,\n  ChatCompletionFunctionParameters,\n  ChatCompletionFunctionProperty,\n  ChatCompletionFunctionType,\n  ChatCompletionNullProperty,\n  ChatCompletionNumberProperty,\n  ChatCompletionObjectProperty,\n  ChatCompletionRequest,\n  ChatCompletionStringProperty,\n  ChatMessage,\n  ChatMessageFunctionCall,\n  EncodeChatOptions,\n  HarmonyTerminator,\n} from './functionCalling.js'\n\nexport interface CostEstimate {\n  input?: number\n  output?: number\n  /** batch API input cost */\n  batchInput?: number\n  /** batch API output cost */\n  batchOutput?: number\n  /** cached input cost */\n  cachedInput?: number\n  /** training cost per million tokens */\n  training?: number\n}\n\nexport interface EncodeOptions {\n  /**\n   * A list of special tokens that are allowed in the input.\n   * If set to 'all', all special tokens are allowed except those in disallowedSpecial.\n   * @default undefined\n   */\n  allowedSpecial?: Set<string> | typeof ALL_SPECIAL_TOKENS\n  /**\n   * A list of special tokens that are disallowed in the input.\n   * If set to 'all', all special tokens are disallowed except those in allowedSpecial.\n   * @default 'all'\n   */\n  disallowedSpecial?: Set<string> | typeof ALL_SPECIAL_TOKENS\n}\n\ninterface SpecialTokenConfig {\n  allowedSpecial: Set<string> | undefined\n  regexPattern: RegExp | undefined\n}\n\nexport class GptEncoding {\n  static EndOfPrompt = EndOfPrompt\n  static EndOfText = EndOfText\n  static FimMiddle = FimMiddle\n  static FimPrefix = FimPrefix\n  static FimSuffix = FimSuffix\n\n  modelName?: ModelName\n  modelSpec?: ModelSpec\n  private bytePairEncodingCoreProcessor: BytePairEncodingCore\n  private specialTokensEncoder: Map<string, number>\n  private specialTokensSet: Set<string>\n  private allSpecialTokenRegex: RegExp\n  private defaultSpecialTokenConfig: SpecialTokenConfig\n  private chatFormatter: ChatFormatter\n\n  countChatCompletionTokens?: (request: ChatCompletionRequest) => number\n\n  readonly vocabularySize: number\n\n  private constructor({\n    bytePairRankDecoder: mergeableBytePairRanks,\n    specialTokensEncoder,\n    expectedVocabularySize,\n    modelName,\n    modelSpec,\n    chatFormatter,\n    ...rest\n  }: EncodingParams) {\n    this.specialTokensEncoder = specialTokensEncoder\n    this.specialTokensSet = new Set<string>(this.specialTokensEncoder.keys())\n    this.allSpecialTokenRegex = getSpecialTokenRegex(this.specialTokensSet)\n\n    this.bytePairEncodingCoreProcessor = new BytePairEncodingCore({\n      bytePairRankDecoder: mergeableBytePairRanks,\n      specialTokensEncoder,\n      ...rest,\n    })\n    this.defaultSpecialTokenConfig = this.processSpecialTokens()\n\n    const maxTokenValue = Math.max(\n      mergeableBytePairRanks.length - 1,\n      getMaxValueFromMap(specialTokensEncoder),\n    )\n\n    this.vocabularySize =\n      this.bytePairEncodingCoreProcessor.mergeableBytePairRankCount +\n      specialTokensEncoder.size\n\n    if (expectedVocabularySize !== undefined) {\n      if (this.vocabularySize !== expectedVocabularySize) {\n        throw new Error(\n          'The number of mergeable tokens and special tokens must be equal to expectedVocabularySize.',\n        )\n      }\n\n      if (maxTokenValue !== expectedVocabularySize - 1) {\n        throw new Error(\n          `The model encodings are invalid. The maximum token value must be equal to expectedVocabularySize - 1. Currently ${maxTokenValue}, expected ${\n            expectedVocabularySize - 1\n          }`,\n        )\n      }\n    }\n\n    this.encode = this.encode.bind(this)\n    this.decode = this.decode.bind(this)\n    this.encodeGenerator = this.encodeGenerator.bind(this)\n    this.decodeGenerator = this.decodeGenerator.bind(this)\n    this.decodeAsyncGenerator = this.decodeAsyncGenerator.bind(this)\n    this.decodeAsync = this.decodeAsync.bind(this)\n    this.isWithinTokenLimit = this.isWithinTokenLimit.bind(this)\n    this.encodeChat = this.encodeChat.bind(this)\n    this.encodeChatGenerator = this.encodeChatGenerator.bind(this)\n    this.countTokens = this.countTokens.bind(this)\n    this.setMergeCacheSize = this.setMergeCacheSize.bind(this)\n    this.clearMergeCache = this.clearMergeCache.bind(this)\n    this.estimateCost = this.estimateCost.bind(this)\n    if (modelSpec?.supported_features?.includes('function_calling')) {\n      this.countChatCompletionTokens =\n        this.countChatCompletionTokensInternal.bind(this)\n    }\n    this.modelName = modelName\n    this.modelSpec = modelSpec\n    this.chatFormatter = chatFormatter ?? 'chatml'\n  }\n\n  private *encodeHarmonyChatGenerator(\n    chat: Iterable<ChatMessage>,\n    encodeOptions?: EncodeOptions & EncodeChatOptions,\n  ): Generator<number[], void, undefined> {\n    const harmonyStart = this.specialTokensEncoder.get(HarmonyStart)\n    const harmonyMessage = this.specialTokensEncoder.get(HarmonyMessage)\n    const harmonyEnd = this.specialTokensEncoder.get(HarmonyEnd)\n    const harmonyReturn = this.specialTokensEncoder.get(HarmonyReturn)\n    const harmonyCall = this.specialTokensEncoder.get(HarmonyCall)\n    const harmonyChannel = this.specialTokensEncoder.get(HarmonyChannel)\n    const harmonyConstrain = this.specialTokensEncoder.get(HarmonyConstrain)\n\n    if (\n      harmonyStart === undefined ||\n      harmonyMessage === undefined ||\n      harmonyEnd === undefined ||\n      harmonyReturn === undefined ||\n      harmonyCall === undefined ||\n      harmonyChannel === undefined ||\n      harmonyConstrain === undefined\n    ) {\n      throw new Error('Harmony chat format requires dedicated special tokens.')\n    }\n\n    const encodeHeaderText = (text: string): number[] =>\n      text.length > 0 ? this.encode(text) : []\n\n    const resolveTerminatorToken = (terminator?: HarmonyTerminator): number => {\n      switch (terminator) {\n        case '<|return|>':\n          return harmonyReturn\n        case '<|call|>':\n          return harmonyCall\n        // eslint-disable-next-line unicorn/no-useless-switch-case\n        case '<|end|>':\n        default:\n          return harmonyEnd\n      }\n    }\n\n    for (const message of chat) {\n      if (message.content === undefined) {\n        throw new Error('Content must be defined for all messages.')\n      }\n\n      const roleOrName = message.name ?? message.role ?? 'user'\n      yield [harmonyStart]\n      yield encodeHeaderText(roleOrName)\n\n      const recipientInRole =\n        message.recipient &&\n        (message.recipientPlacement === 'role' || !message.channel)\n      const recipientInChannel = message.recipient && !recipientInRole\n\n      if (recipientInRole) {\n        yield encodeHeaderText(` to=${message.recipient}`)\n      }\n\n      if (message.channel) {\n        yield [harmonyChannel]\n        yield encodeHeaderText(message.channel)\n        if (recipientInChannel) {\n          yield encodeHeaderText(` to=${message.recipient}`)\n        }\n      }\n\n      if (message.constraint) {\n        yield [harmonyConstrain]\n        yield encodeHeaderText(message.constraint)\n      }\n\n      yield [harmonyMessage]\n      yield* this.encodeGenerator(message.content, encodeOptions)\n      yield [resolveTerminatorToken(message.terminator)]\n    }\n\n    const assistantPrime =\n      encodeOptions?.primeWithAssistantResponse ?? 'assistant'\n\n    if (assistantPrime.length > 0) {\n      yield [harmonyStart]\n      yield encodeHeaderText(assistantPrime)\n    }\n  }\n\n  static getEncodingApi(\n    encodingName: EncodingName,\n    getMergeableRanks: GetMergeableRanksFn,\n  ): GptEncoding {\n    const modelParams = getEncodingParams(encodingName, getMergeableRanks)\n    return new GptEncoding(modelParams)\n  }\n\n  static getEncodingApiForModel(\n    modelName: ModelName,\n    getMergeableRanks: GetMergeableRanksFn,\n    modelSpec: ModelSpec,\n  ): GptEncoding {\n    const encodingName = modelToEncodingMap[modelName] ?? DEFAULT_ENCODING\n    const modelParams = getEncodingParams(encodingName, getMergeableRanks)\n    return new GptEncoding({ ...modelParams, modelName, modelSpec })\n  }\n\n  private processSpecialTokens({\n    allowedSpecial,\n    disallowedSpecial,\n  }: EncodeOptions = {}): SpecialTokenConfig {\n    let regexPattern: RegExp | undefined\n\n    if (\n      allowedSpecial === ALL_SPECIAL_TOKENS ||\n      allowedSpecial?.has(ALL_SPECIAL_TOKENS)\n    ) {\n      allowedSpecial = new Set(this.specialTokensSet)\n      const allowedSpecialSet = allowedSpecial\n      if (disallowedSpecial === ALL_SPECIAL_TOKENS) {\n        throw new Error(\n          'allowedSpecial and disallowedSpecial cannot both be set to \"all\".',\n        )\n      }\n      if (typeof disallowedSpecial === 'object') {\n        // remove any special tokens that are disallowed\n        disallowedSpecial.forEach((val) => allowedSpecialSet.delete(val))\n      } else {\n        // all special tokens are allowed, and no 'disallowedSpecial' is provided\n        disallowedSpecial = new Set()\n      }\n    }\n\n    if (\n      !disallowedSpecial ||\n      disallowedSpecial === ALL_SPECIAL_TOKENS ||\n      disallowedSpecial.has(ALL_SPECIAL_TOKENS)\n    ) {\n      // by default, all special tokens are disallowed\n      disallowedSpecial = new Set(this.specialTokensSet)\n      const disallowedSpecialSet = disallowedSpecial\n      if (allowedSpecial?.size) {\n        allowedSpecial.forEach((val) => disallowedSpecialSet.delete(val))\n        // disallowed takes precedence over allowed\n        disallowedSpecial.forEach((val) => allowedSpecial.delete(val))\n        if (disallowedSpecial.size > 0) {\n          regexPattern = getSpecialTokenRegex(disallowedSpecial)\n        }\n      } else {\n        regexPattern = this.allSpecialTokenRegex\n      }\n    }\n\n    return { allowedSpecial, regexPattern }\n  }\n\n  encodeGenerator(\n    lineToEncode: string,\n    encodeOptions?: EncodeOptions,\n  ): Generator<number[], number, undefined> {\n    const specialTokenConfig = encodeOptions\n      ? this.processSpecialTokens(encodeOptions)\n      : this.defaultSpecialTokenConfig\n\n    if (specialTokenConfig.regexPattern) {\n      const match = lineToEncode.match(specialTokenConfig.regexPattern)\n      if (match !== null) {\n        throw new Error(`Disallowed special token found: ${match[0]}`)\n      }\n    }\n\n    return this.bytePairEncodingCoreProcessor.encodeNativeGenerator(\n      lineToEncode,\n      specialTokenConfig.allowedSpecial,\n    )\n  }\n\n  encode(lineToEncode: string, encodeOptions?: EncodeOptions): number[] {\n    const specialTokenConfig = encodeOptions\n      ? this.processSpecialTokens(encodeOptions)\n      : this.defaultSpecialTokenConfig\n\n    if (specialTokenConfig.regexPattern) {\n      const match = lineToEncode.match(specialTokenConfig.regexPattern)\n      if (match !== null) {\n        throw new Error(`Disallowed special token found: ${match[0]}`)\n      }\n    }\n\n    return this.bytePairEncodingCoreProcessor.encodeNative(\n      lineToEncode,\n      specialTokenConfig.allowedSpecial,\n    )\n  }\n\n  /**\n   * Progressively tokenizes an OpenAI chat.\n   * Warning: gpt-3.5-turbo and gpt-4 chat format may change over time.\n   * Returns tokens assuming the 'gpt-3.5-turbo-0301' / 'gpt-4-0314' format.\n   * Based on OpenAI's guidelines: https://github.com/openai/openai-python/blob/main/chatml.md\n   * Also mentioned in section 6 of this document: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb\n   * @param encodeOptions Options controlling how special tokens are handled.\n   */\n  *encodeChatGenerator(\n    chat: Iterable<ChatMessage>,\n    model = this.modelName,\n    encodeOptions?: EncodeOptions & EncodeChatOptions,\n  ): Generator<number[], void, undefined> {\n    if (!model) {\n      throw new Error(\n        'Model name must be provided either during initialization or passed in to the method.',\n      )\n    }\n\n    const params: ChatParameters | undefined =\n      chatModelParams[model as ChatModelName]\n    if (!params) {\n      throw new Error(`Model '${model}' does not support chat.`)\n    }\n\n    if (this.chatFormatter === 'harmony') {\n      yield* this.encodeHarmonyChatGenerator(chat, encodeOptions)\n      return\n    }\n\n    const chatStartToken = this.specialTokensEncoder.get(ImStart)\n    const chatEndToken = this.specialTokensEncoder.get(ImEnd)\n\n    if (chatStartToken === undefined || chatEndToken === undefined) {\n      throw new Error(`Model '${model}' does not support chat.`)\n    }\n    const allowedSpecial = new Set([ImSep])\n    const { messageSeparator, roleSeparator } = params\n    const encodedMessageSeparator =\n      messageSeparator.length > 0 ? this.encode(messageSeparator) : []\n    const encodedRoleSeparator =\n      roleSeparator.length > 0\n        ? this.encode(roleSeparator, { allowedSpecial })\n        : []\n    const nameCache = new Map<string, number[]>()\n\n    for (const { role = 'system', name = role, content } of chat) {\n      if (content === undefined) {\n        throw new Error('Content must be defined for all messages.')\n      }\n\n      yield [chatStartToken]\n      const encodedName = nameCache.get(name) ?? this.encode(name)\n      nameCache.set(name, encodedName)\n      yield encodedName\n      if (encodedRoleSeparator.length > 0) {\n        yield encodedRoleSeparator\n      }\n      yield* this.encodeGenerator(content, encodeOptions)\n      yield [chatEndToken]\n      yield encodedMessageSeparator\n    }\n\n    // every reply is primed with <|start|>assistant<|message|>\n    const assistantPrime =\n      encodeOptions?.primeWithAssistantResponse ?? 'assistant'\n    if (assistantPrime.length > 0) {\n      yield [chatStartToken]\n      yield* this.encodeGenerator(assistantPrime, encodeOptions)\n    }\n    if (encodedRoleSeparator.length > 0) {\n      yield encodedRoleSeparator\n    }\n  }\n\n  /**\n   * Encodes a chat into a single array of tokens.\n   * Warning: gpt-3.5-turbo and gpt-4 chat format may change over time.\n   * Returns tokens assuming the 'gpt-3.5-turbo-0301' / 'gpt-4-0314' format.\n   * Based on OpenAI's guidelines: https://github.com/openai/openai-python/blob/main/chatml.md\n   * Also mentioned in section 6 of this document: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb\n   * @param encodeOptions Options controlling how special tokens are handled.\n   */\n  encodeChat(\n    chat: readonly ChatMessage[],\n    model = this.modelName,\n    encodeOptions?: EncodeOptions & EncodeChatOptions,\n  ): number[] {\n    return [...this.encodeChatGenerator(chat, model, encodeOptions)].flat()\n  }\n\n  /**\n   * Checks whether the provided input stays within the provided token limit.\n   * @param input The string or chat messages to evaluate.\n   * @param tokenLimit The maximum allowed number of tokens.\n   * @param encodeOptions Options controlling how special tokens are handled.\n   * @returns {false | number} false if token limit is exceeded, otherwise the number of tokens\n   */\n  isWithinTokenLimit(\n    input: string | Iterable<ChatMessage>,\n    tokenLimit: number,\n    encodeOptions?: EncodeOptions,\n  ): false | number {\n    const tokenGenerator =\n      typeof input === 'string'\n        ? this.encodeGenerator(input, encodeOptions)\n        : this.encodeChatGenerator(input, undefined, encodeOptions)\n    let count = 0\n    for (const tokens of tokenGenerator) {\n      count += tokens.length\n      if (count > tokenLimit) {\n        return false\n      }\n    }\n    return count\n  }\n\n  /**\n   * Counts the number of tokens in the input.\n   * @param input The string or chat messages to evaluate.\n   * @param encodeOptions Options controlling how special tokens are handled.\n   * @returns {number} The number of tokens.\n   */\n  countTokens(\n    input: string | Iterable<ChatMessage>,\n    encodeOptions?: EncodeOptions,\n  ): number {\n    if (typeof input === 'string') {\n      const specialTokenConfig = encodeOptions\n        ? this.processSpecialTokens(encodeOptions)\n        : this.defaultSpecialTokenConfig\n\n      if (specialTokenConfig.regexPattern) {\n        const match = input.match(specialTokenConfig.regexPattern)\n        if (match !== null) {\n          throw new Error(`Disallowed special token found: ${match[0]}`)\n        }\n      }\n\n      return this.bytePairEncodingCoreProcessor.countNative(\n        input,\n        specialTokenConfig.allowedSpecial,\n      )\n    }\n\n    const tokenGenerator = this.encodeChatGenerator(\n      input,\n      undefined,\n      encodeOptions,\n    )\n    let count = 0\n    for (const tokens of tokenGenerator) {\n      count += tokens.length\n    }\n    return count\n  }\n\n  private countStringTokens(text: string): number {\n    if (!text) {\n      return 0\n    }\n\n    return this.bytePairEncodingCoreProcessor.countNative(text)\n  }\n\n  private countChatCompletionTokensInternal(\n    request: ChatCompletionRequest,\n  ): number {\n    return computeChatCompletionTokenCount(request, (text) =>\n      this.countStringTokens(text),\n    )\n  }\n\n  setMergeCacheSize(size: number): void {\n    this.bytePairEncodingCoreProcessor.setMergeCacheSize(size)\n  }\n\n  clearMergeCache(): void {\n    this.bytePairEncodingCoreProcessor.clearMergeCache()\n  }\n\n  decode(inputTokensToDecode: Iterable<number>): string {\n    return this.bytePairEncodingCoreProcessor.decodeNative(inputTokensToDecode)\n  }\n\n  *decodeGenerator(\n    inputTokensToDecode: Iterable<number>,\n  ): Generator<string, void, void> {\n    const decodedByteGenerator =\n      this.bytePairEncodingCoreProcessor.decodeNativeGenerator(\n        inputTokensToDecode,\n      )\n\n    let buffer = ''\n\n    for (const decodedPart of decodedByteGenerator) {\n      buffer +=\n        typeof decodedPart === 'string'\n          ? decodedPart\n          : decoder.decode(decodedPart, { stream: true })\n\n      if (buffer.length === 0 || endsWithIncompleteUtfPairSurrogate(buffer)) {\n        // Keep the high surrogate in the buffer and continue with the next token\n        // eslint-disable-next-line no-continue\n        continue\n      } else {\n        yield buffer\n        // reset buffer\n        buffer = ''\n      }\n    }\n\n    // Yield any remaining characters in the buffer\n    if (buffer.length > 0) {\n      yield buffer\n    }\n  }\n\n  async *decodeAsyncGenerator(\n    inputTokensToDecode: AsyncIterable<number>,\n  ): AsyncGenerator<string, void> {\n    const decodedByteGenerator =\n      this.bytePairEncodingCoreProcessor.decodeNativeAsyncIterable(\n        inputTokensToDecode,\n      )\n\n    let buffer = ''\n\n    for await (const decodedPart of decodedByteGenerator) {\n      buffer +=\n        typeof decodedPart === 'string'\n          ? decodedPart\n          : decoder.decode(decodedPart, { stream: true })\n\n      if (buffer.length === 0 || endsWithIncompleteUtfPairSurrogate(buffer)) {\n        // Keep the high surrogate in the buffer and continue with the next token\n        // eslint-disable-next-line no-continue\n        continue\n      } else {\n        yield buffer\n        // reset buffer\n        buffer = ''\n      }\n    }\n\n    // Yield any remaining characters in the buffer\n    if (buffer.length > 0) {\n      yield buffer\n    }\n  }\n\n  async decodeAsync(\n    inputTokensToDecode: AsyncIterable<number>,\n  ): Promise<string> {\n    const decodedByteGenerator =\n      this.bytePairEncodingCoreProcessor.decodeNativeAsyncIterable(\n        inputTokensToDecode,\n      )\n\n    let buffer = ''\n\n    for await (const decodedPart of decodedByteGenerator) {\n      buffer +=\n        typeof decodedPart === 'string'\n          ? decodedPart\n          : decoder.decode(decodedPart, { stream: true })\n    }\n\n    return buffer\n  }\n\n  /**\n   * Estimates the cost of processing a given token count using the model's pricing.\n   *\n   * @param tokenCount - The number of tokens to estimate cost for\n   * @returns Cost estimate object with applicable price components (input, output, batchInput, batchOutput)\n   */\n  estimateCost(tokenCount: number, modelSpec = this.modelSpec): PriceData {\n    if (!modelSpec) {\n      throw new Error(\n        'Model spec must be provided either during initialization or passed in to the method.',\n      )\n    }\n\n    if (!modelSpec.price_data) {\n      throw new Error(\n        `No cost information available for model: ${modelSpec.name}`,\n      )\n    }\n\n    const priceDataPerMillion = modelSpec.price_data\n    const result: PriceData = {}\n\n    // Calculate cost per token and multiply by token count\n    // eslint-disable-next-line no-magic-numbers\n    const millionTokens = tokenCount / 1_000_000\n\n    if (priceDataPerMillion.main) {\n      result.main = {\n        input:\n          priceDataPerMillion.main.input &&\n          priceDataPerMillion.main.input * millionTokens,\n        output:\n          priceDataPerMillion.main.output &&\n          priceDataPerMillion.main.output * millionTokens,\n        cached_input:\n          priceDataPerMillion.main.cached_input &&\n          priceDataPerMillion.main.cached_input * millionTokens,\n        cached_output:\n          priceDataPerMillion.main.cached_output &&\n          priceDataPerMillion.main.cached_output * millionTokens,\n      }\n    }\n\n    if (priceDataPerMillion.batch) {\n      result.batch = {\n        input:\n          priceDataPerMillion.batch.input &&\n          priceDataPerMillion.batch.input * millionTokens,\n        output:\n          priceDataPerMillion.batch.output &&\n          priceDataPerMillion.batch.output * millionTokens,\n        cached_input:\n          priceDataPerMillion.batch.cached_input &&\n          priceDataPerMillion.batch.cached_input * millionTokens,\n        cached_output:\n          priceDataPerMillion.batch.cached_output &&\n          priceDataPerMillion.batch.cached_output * millionTokens,\n      }\n    }\n\n    return result\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1855, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/encoding/o200k_base.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/encoding/o200k_base.ts"],"sourcesContent":["/* eslint-disable import/extensions */\nimport bpeRanks from '../bpeRanks/o200k_base.js'\nimport { GptEncoding } from '../GptEncoding.js'\n\nexport * from '../constants.js'\nexport * from '../specialTokens.js'\n\nconst api = GptEncoding.getEncodingApi('o200k_base', () => bpeRanks)\nconst {\n  decode,\n  decodeAsyncGenerator,\n  decodeGenerator,\n  encode,\n  encodeGenerator,\n  isWithinTokenLimit,\n  countTokens,\n  encodeChat,\n  encodeChatGenerator,\n  vocabularySize,\n  setMergeCacheSize,\n  clearMergeCache,\n  estimateCost,\n} = api\nexport {\n  clearMergeCache,\n  countTokens,\n  decode,\n  decodeAsyncGenerator,\n  decodeGenerator,\n  encode,\n  encodeChat,\n  encodeChatGenerator,\n  encodeGenerator,\n  estimateCost,\n  isWithinTokenLimit,\n  setMergeCacheSize,\n  vocabularySize,\n}\n// eslint-disable-next-line import/no-default-export\nexport default api\n"],"names":[],"mappings":"AAAA,oCAAA,EAAsC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACtC,OAAO,QAAQ,MAAM,2BAA2B,CAAA;AAChD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAA;AAE/C,cAAc,iBAAiB,CAAA;AAC/B,cAAc,qBAAqB,CAAA;;;;;AAEnC,MAAM,GAAG,GAAG,kOAAW,CAAC,cAAc,CAAC,YAAY,EAAE,GAAG,CAAG,CAAD,wOAAS,CAAC,CAAA;AACpE,MAAM,EACJ,MAAM,EACN,oBAAoB,EACpB,eAAe,EACf,MAAM,EACN,eAAe,EACf,kBAAkB,EAClB,WAAW,EACX,UAAU,EACV,mBAAmB,EACnB,cAAc,EACd,iBAAiB,EACjB,eAAe,EACf,YAAY,EACb,GAAG,GAAG,CAAA;;uCAiBQ,GAAG,CAAA"}},
    {"offset": {"line": 1975, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/gpt-tokenizer@3.4.0/node_modules/gpt-tokenizer/esm/main.js","sources":["file:///home/runner/workspace/node_modules/.pnpm/gpt-tokenizer%403.4.0/node_modules/gpt-tokenizer/src/main.ts"],"sourcesContent":["// eslint-disable-next-line no-restricted-exports, import/no-default-export\nexport { default } from './encoding/o200k_base.js'\nexport * from './encoding/o200k_base.js'\n"],"names":[],"mappings":"AAAA,2EAA2E;;AAC3E,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAA"}}]
}